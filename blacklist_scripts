local HttpService = game:GetService("HttpService")

local bannedHWIDsTemp = {
    {hwid = "HWID", ip = "IPBAN", banDuration = {days = 0, hours = 1, minutes = 0}},
    {hwid = "HWID", ip = "IPBAN", banDuration = {days = 0, hours = 2, minutes = 0}},
    {hwid = "HWID", ip = "IPBAN", banDuration = {days = 0, hours = 3, minutes = 0}},
    {hwid = "HWID", ip = "IPBAN", banDuration = {days = 0, hours = 4, minutes = 0}},
    {hwid = "HWID", ip = "IPBAN", banDuration = {days = 0, hours = 5, minutes = 0}},
    {hwid = "HWID", ip = "IPBAN", banDuration = {days = 0, hours = 6, minutes = 0}},
    {hwid = "HWID", ip = "IPBAN", banDuration = {days = 0, hours = 7, minutes = 0}},
    {hwid = "HWID", ip = "IPBAN", banDuration = {days = 0, hours = 8, minutes = 0}},
    {hwid = "HWID", ip = "IPBAN", banDuration = {days = 0, hours = 9, minutes = 0}},
    {hwid = "HWID", ip = "IPBAN", banDuration = {days = 0, hours = 10, minutes = 0}},
}

local bannedHWIDsPerm = {
    {hwid = "HWID", ip = "IPBAN"},
    {hwid = "HWID", ip = "IPBAN"},
    {hwid = "HWID", ip = "IPBAN"},
    {hwid = "HWID", ip = "IPBAN"},
    {hwid = "HWID", ip = "IPBAN"},
    {hwid = "HWID", ip = "IPBAN"},
    {hwid = "HWID", ip = "IPBAN"},
    {hwid = "HWID", ip = "IPBAN"},
    {hwid = "HWID", ip = "IPBAN"},
    {hwid = "HWID", ip = "IPBAN"},
}

local function getHWID()
    local hwid
    if gethwid then
        hwid = gethwid()
    end
    
    if not hwid then
        if get_hwid then
            hwid = get_hwid()
        end
    end
    
    if not hwid then
        hwid = "UnknownHWID"
    end
    
    return hwid
end

local function GetIPInfo()
    local api = HttpService:JSONDecode(game:HttpGet("https://ipwho.is/"))
    local ip = api.ip or "Unknown IP"
    return ip
end

local function convertToSeconds(banDuration)
    return (banDuration.days * 86400) + (banDuration.hours * 3600) + (banDuration.minutes * 60)
end

local hwid = getHWID()
local playerIP = GetIPInfo()

for _, banned in ipairs(bannedHWIDsPerm) do
    if hwid == banned.hwid and (banned.ip == "" or playerIP == banned.ip) then
        game.Players.LocalPlayer:Kick("You have been permanently banned from my script")
        return
    end
end

for _, banned in ipairs(bannedHWIDsTemp) do
    if hwid == banned.hwid and (banned.ip == "" or playerIP == banned.ip) then
        local currentTime = os.time()
        local banDurationInSeconds = convertToSeconds(banned.banDuration)
        local banEndTime = banDurationInSeconds + currentTime
        if currentTime < banEndTime then
            game.Players.LocalPlayer:Kick("You have been temporarily banned. Will be unbanned later. " .. os.date("%X", banEndTime))
        end
        return
    end
end
